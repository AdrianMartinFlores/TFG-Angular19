<app-nav></app-nav>
<div class="contenedor-jornada">
  <h1 class="titulo-jornada">Control de Jornada</h1>

  <!-- Registro automático -->
  <div class="formulario-jornada">
    <div><label>Actividad</label>
      <input class="input-jornada" type="text" [(ngModel)]="autoNombre" name="autoNombre" required />
    </div>
    <div><label>Fecha</label>
      <input class="input-jornada" type="date" [value]="autoFecha" disabled />
    </div>
    <div><label>Hora inicio</label>
      <input class="input-jornada" type="time" [value]="autoHoraInicio" disabled />
    </div>
    <div><label>Hora fin</label>
      <input class="input-jornada" type="time" [value]="autoHoraFin" disabled />
    </div>
    <div><label>Duración:</label>
      <span>{{ autoTiempoFormateado }}</span>
    </div>
    <button class="boton-jornada" type="button" (click)="iniciarTemporizador()" [disabled]="autoEnCurso">Iniciar jornada</button>
    <button class="boton-jornada" type="button" (click)="finalizarTemporizador()" [disabled]="!autoEnCurso">Finalizar jornada</button>
  </div>

  <h2 class="titulo-jornada">Entrada manual</h2>
  <form class="formulario-jornada" (submit)="registrarJornada($event)">
    <div><label>Actividad</label>
      <input class="input-jornada" type="text" [(ngModel)]="registroSeleccionado.nombre" name="nombre" required />
    </div>
    <div><label>Fecha</label>
      <input class="input-jornada" type="date" [(ngModel)]="registroSeleccionado.fecha" name="fecha" required />
    </div>
    <div><label>Hora entrada</label>
      <input class="input-jornada" type="time" [(ngModel)]="registroSeleccionado.horaEntrada" name="horaEntrada" required />
    </div>
    <div><label>Hora salida</label>
      <input class="input-jornada" type="time" [(ngModel)]="registroSeleccionado.horaSalida" name="horaSalida" />
    </div>
    <button class="boton-jornada" type="submit">Registrar jornada</button>
  </form>

  <div *ngIf="mensaje">{{ mensaje }}</div>

  <h2 class="titulo-jornada">Registros</h2>
  <ul class="lista-jornada">
    <li class="item-jornada" *ngFor="let registro of registros">
      {{ registro.nombre }} | {{ registro.fecha }} | {{ registro.horaEntrada }} - {{ registro.horaSalida }}
      <span *ngIf="registro.horaEntrada && registro.horaSalida">
        <!-- Solo muestra el tiempo si es automático o si hay horas manuales -->
      </span>
    </li>
  </ul>
</div>