<app-nav></app-nav>
<div class="contenedor-jornada">
  <!-- Bloque 1: Control de jornada autom치tica -->
  <div class="bloque-jornada">
    <h1 class="titulo-jornada">Control de Jornada Autom치tica</h1>
    <form class="formulario-jornada" (submit)="iniciarTemporizador(); $event.preventDefault()">
      <div>
        <label>Actividad</label>
        <input class="input-jornada" type="text" [(ngModel)]="autoNombre" name="autoNombre" required />
      </div>
      <div>
        <label>Fecha</label>
        <input class="input-jornada" type="date" [value]="autoFecha" disabled />
      </div>
      <div>
        <label>Hora inicio</label>
        <input class="input-jornada" type="time" [value]="autoHoraInicio" disabled />
      </div>
      <div>
        <label>Hora fin</label>
        <input class="input-jornada" type="time" [value]="autoHoraFin" disabled />
      </div>
      <div>
        <label>Duraci칩n:</label>
        <span>{{ autoTiempoFormateado }}</span>
      </div>
      <div style="display: flex; gap: 8px;">
        <button class="boton-jornada" type="button" (click)="iniciarTemporizador()" [disabled]="autoEnCurso">Iniciar jornada</button>
        <button class="boton-jornada" type="button" (click)="finalizarTemporizador()" [disabled]="!autoEnCurso">Finalizar jornada</button>
      </div>
    </form>
  </div>

  <!-- Bloque 2: Entrada manual -->
  <div class="bloque-jornada">
    <h1 class="titulo-jornada">Entrada Manual</h1>
    <form class="formulario-jornada" (submit)="registrarJornada($event)">
      <div>
        <label>Actividad</label>
        <input class="input-jornada" type="text" [(ngModel)]="registroSeleccionado.nombre" name="nombre" required />
      </div>
      <div>
        <label>Fecha</label>
        <input class="input-jornada" type="date" [(ngModel)]="registroSeleccionado.fecha" name="fecha" required />
      </div>
      <div>
        <label>Hora entrada</label>
        <input class="input-jornada" type="time" [(ngModel)]="registroSeleccionado.horaEntrada" name="horaEntrada" required />
      </div>
      <div>
        <label>Hora salida</label>
        <input class="input-jornada" type="time" [(ngModel)]="registroSeleccionado.horaSalida" name="horaSalida" />
      </div>
      <button class="boton-jornada" type="submit">Registrar jornada</button>
    </form>
    <div *ngIf="mensaje" class="mensaje-jornada">{{ mensaje }}</div>
  </div>
</div>

<!-- Bloque 3: Registros (debajo de los dos bloques principales) -->
<div class="bloque-registros">
  <h2 class="titulo-jornada">Registros de Jornada</h2>
  <div class="tabla-responsive">
    <table class="tabla-jornada">
      <thead>
        <tr>
          <th>Actividad</th>
          <th>Fecha</th>
          <th>Hora entrada</th>
          <th>Hora salida</th>
          <th>Duraci칩n</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let registro of registros">
          <td>{{ registro.nombre }}</td>
          <td>{{ registro.fecha }}</td>
          <td>{{ registro.horaEntrada }}</td>
          <td>{{ registro.horaSalida }}</td>
          <td>
            {{ calcularDuracionRegistro(registro) }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>